{"version":3,"sources":["../src/evacuate.js"],"names":["evacuateCodeAsComment","path","evacuatedTag","node","leadingComments","leadingComments_","innerComments","trailingComments","trailingComments_","addComment","JSON","stringify","addComments","replaceWith","t","noop","evacuateFeaturesPlugin","api","options","assertVersion","features","name","visitor","ClassProperty","includes","Decorator"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;AAEA;;;AAGA,SAASA,qBAAT,CAA+BC,IAA/B,EAAqCC,YAArC,EAAmD;AACjD,gCAKI,iCAAsBD,IAAI,CAACE,IAA3B,CALJ;AAAA,QAAM;AACJC,IAAAA,eAAe,EAAEC,gBAAgB,GAAG,EADhC;AAEJC,IAAAA,aAFI;AAGJC,IAAAA,gBAAgB,EAAEC,iBAAiB,GAAG;AAHlC,GAAN;AAAA,QAIKL,IAJL;;AAMA,QAAMC,eAAe,GAAG,CAAC,GAAGC,gBAAJ,CAAxB;AACA,QAAME,gBAAgB,GAAG,CAAC,GAAGC,iBAAJ,CAAzB;AACAP,EAAAA,IAAI,CAACE,IAAL,CAAUC,eAAV,GAA4B,EAA5B;AACAH,EAAAA,IAAI,CAACE,IAAL,CAAUI,gBAAV,GAA6B,EAA7B;AACAN,EAAAA,IAAI,CAACQ,UAAL,CACE,SADF,EAEG;;EAEHP,YAAa;EACbQ,IAAI,CAACC,SAAL,CAAeR,IAAf,CAAqB;CALrB;AAQAF,EAAAA,IAAI,CAACW,WAAL,CAAiB,SAAjB,EAA4BR,eAA5B;AACAH,EAAAA,IAAI,CAACY,WAAL,CAAiBC,CAAC,CAACC,IAAF,EAAjB;AACD;AAED;;;;;AAGA,MAAMC,sBAAsB,GAAG,gCAAQ,CAACC,GAAD,EAAMC,OAAO,GAAG,EAAhB,KAAuB;AAC5DD,EAAAA,GAAG,CAACE,aAAJ,CAAkB,CAAlB;AACA,QAAM;AACJC,IAAAA,QAAQ,GAAG,CAAC,iBAAD,EAAoB,WAApB,CADP;AAEJlB,IAAAA,YAAY,GAAG;AAFX,MAGFgB,OAHJ;AAIA,SAAO;AACLG,IAAAA,IAAI,EAAE,6BADD;AAELC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,CAACtB,IAAD,EAAO;AAClB,YAAImB,QAAQ,CAACI,QAAT,CAAkB,iBAAlB,CAAJ,EAA0C;AACxCxB,UAAAA,qBAAqB,CAACC,IAAD,EAAOC,YAAP,CAArB;AACD;AACF,OALM;;AAMPuB,MAAAA,SAAS,CAACxB,IAAD,EAAO;AACd,YAAImB,QAAQ,CAACI,QAAT,CAAkB,WAAlB,CAAJ,EAAoC;AAClCxB,UAAAA,qBAAqB,CAACC,IAAD,EAAOC,YAAP,CAArB;AACD;AACF;;AAVM;AAFJ,GAAP;AAeD,CArB8B,CAA/B;eAuBec,sB","sourcesContent":["import * as t from '@babel/types';\nimport { declare } from '@babel/helper-plugin-utils';\nimport { stripLocationFromNode } from './util';\n\n/**\n *\n */\nfunction evacuateCodeAsComment(path, evacuatedTag) {\n  const {\n    leadingComments: leadingComments_ = [],\n    innerComments,\n    trailingComments: trailingComments_ = [],\n    ...node\n  } = stripLocationFromNode(path.node);\n  const leadingComments = [...leadingComments_];\n  const trailingComments = [...trailingComments_];\n  path.node.leadingComments = [];\n  path.node.trailingComments = [];\n  path.addComment(\n    'leading',\n    `\n@preserve\n${evacuatedTag}\n${JSON.stringify(node)}\n`\n  );\n  path.addComments('leading', leadingComments);\n  path.replaceWith(t.noop());\n}\n\n/**\n *\n */\nconst evacuateFeaturesPlugin = declare((api, options = {}) => {\n  api.assertVersion(7);\n  const {\n    features = ['classProperties', 'decorator'],\n    evacuatedTag = '@evacuated'\n  } = options;\n  return {\n    name: 'transform-evacuate-features',\n    visitor: {\n      ClassProperty(path) {\n        if (features.includes('classProperties')) {\n          evacuateCodeAsComment(path, evacuatedTag);\n        }\n      },\n      Decorator(path) {\n        if (features.includes('decorator')) {\n          evacuateCodeAsComment(path, evacuatedTag);\n        }\n      }\n    }\n  };\n});\n\nexport default evacuateFeaturesPlugin;\n"],"file":"evacuate.js"}